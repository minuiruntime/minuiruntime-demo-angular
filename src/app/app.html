<div class="app-container">
  <header class="app-header">
    <h1>{{ title() }}</h1>
    <p class="subtitle">Real-time AI UI Streaming with MinUIRuntime WASM</p>
  </header>

  <div class="main-content">
    <div class="controls-section">
      <div class="controls">
        <button 
          class="btn btn-start" 
          (click)="startStreaming()" 
          [disabled]="isStreaming()">
          Start Streaming
        </button>
        <button 
          class="btn btn-stop" 
          (click)="stopStreaming()" 
          [disabled]="!isStreaming()">
          Stop
        </button>
      </div>
      
      <div class="status-info">
        <div class="status-badge" [class.active]="isStreaming()">
          {{ isStreaming() ? 'Streaming' : 'Idle' }}
        </div>
        <div class="patch-counter">
          Patches: <span class="counter-value">{{ patchCount() }}</span>
        </div>
      </div>
    </div>

    <div class="preview-section">
      <h2>Live Preview</h2>
      <div class="preview-container" [innerHTML]="htmlContent()"></div>
      
      @if (!isStreaming() && patchCount() === 0) {
        <div class="empty-state">
          <p>Click "Start Streaming" to begin the demo</p>
          <p class="hint">Components will appear here in real-time as JSON fragments are processed</p>
        </div>
      }
    </div>

    <div class="json-editor-section">
      <h2>Direct JSON Rendering</h2>
      <p class="section-description">Edit the JSON below and click "Render" to see MinUI Runtime convert it to HTML</p>
      
      <div class="editor-container">
        <div class="editor-panel">
          <h3>MinUI JSON Input</h3>
          <textarea 
            class="json-input" 
            [(ngModel)]="jsonInput"
            placeholder="Enter MinUI JSON here..."
            spellcheck="false"></textarea>
          <button class="btn btn-render" (click)="renderJson()">Render JSON</button>
        </div>
        
        <div class="output-panel">
          <h3>Rendered Output</h3>
          @if (renderError()) {
            <div class="error-message">
              <strong>Error:</strong> {{ renderError() }}
            </div>
          }
          @if (renderedOutput()) {
            <div class="rendered-container" [innerHTML]="renderedOutput()"></div>
          }
          @if (!renderError() && !renderedOutput()) {
            <div class="empty-state">
              <p>Rendered output will appear here</p>
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <footer class="app-footer">
    <p>Auto-stops after 2 minutes â€¢ Streaming interval: 500ms</p>
  </footer>
</div>
